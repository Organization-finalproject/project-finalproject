<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-2.2.4.js"
		integrity="sha256-iT6Q9iMJYuQiMWNd9lDyBUStIq/8PuOW33aOqmvFpqI=" crossorigin="anonymous"></script>

<style type="text/css">
.card{
	width: 150px;
	height:200px;
}
#card1{
	position: absolute;
	left: 100px;
	top: 50px;
}
#card2{
	position: absolute;
	left: 300px;
	top: 50px;
}
#card3{
	position: absolute;
	left: 500px;
	top: 50px;
}
#card4{
	position: absolute;
	left: 100px;
	top: 300px;
}
#card5{
	position: absolute;
	left: 300px;
	top: 300px;
}
#card6{
	position: absolute;
	left: 500px;
	top: 300px;
}
</style>

<script type="text/javascript">
arr = [];
check = [];
list = [];
count = 6;
$(document).ready(function(){
	setting();
})

function setting(){ //처음 랜덤으로 순서 셋팅하기
	var flag = true;
	for(var i = 0; i<6;i++){
		flag = true;
		var num = Math.round(Math.random() * 5) + 1;
		for(var j in arr){
			if(arr[j] == num){
				flag = false;
				i--;
			}
		}
		if(flag)
			arr.push(num);
	}

}
function checkCard(){ //카드 2개 확인하기
	// if(list.length==1){
	// 	$('#'+list[0]).attr('src','images/backback.png');
	// 	list.splice(0,1);
	// 	check.splice(0,1); //리스트에서 제거
	// }
	if(check[0]==check[1]){//정답 일치하는 경우 카드 없애주기
		$('#'+list[0]).remove();
		$('#'+list[1]).remove();
		count -=2;
		if(count==0){
			alert("게임 끝!");
		}
	}
	else{ //각각 다시 뒷면으로 바꾸기
		$('#'+list[0]).attr('src','images/backback.png');
		$('#'+list[1]).attr('src','images/backback.png');
	}
	list.splice(0,2);
	check.splice(0,2); //리스트에서 제거
}

$(function(){
	$('.card').click(function(){
		if(list.length==2){ //이미 2개가 열려있는 경우 카드 오픈 막기
			return;
		}
		var id=$(this).attr('id'); //아이디값 받기
		list.push(id);
		
		if(arr[id.charAt(4)-1]==1 || arr[id.charAt(4)-1]==2){
			check.push(1);
			$(this).attr('src','images/11.jpg');
		}
		if(arr[id.charAt(4)-1]==3 || arr[id.charAt(4)-1]==4){
			check.push(2);
			$(this).attr('src','images/22.jpg');
		}
		if(arr[id.charAt(4)-1]==5 || arr[id.charAt(4)-1]==6){
			check.push(3);
			$(this).attr('src','images/33.jpg');
		}
		// if(list.length==1){
		// 	setTimeout(function(){
		// 		if(list.length==2){

		// 		}
		// 		else{
		// 			checkCard();
		// 		}
		// 	},5000)
		// }
		if(list.length==2){
			setTimeout(function(){
				checkCard();
			},1500);
		}
	});
});

</script>
</head>
<body>
	<!-- <div id="div"> -->
		<img src="images/backback.png" id="card1" class="card">
		<img src="images/backback.png" id="card2" class="card">
		<img src="images/backback.png" id="card3" class="card">
		<img src="images/backback.png" id="card4" class="card">
		<img src="images/backback.png" id="card5" class="card">
		<img src="images/backback.png" id="card6" class="card">
	<!-- </div> -->
</body>
</html>